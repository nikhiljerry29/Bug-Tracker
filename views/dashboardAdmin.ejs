<%- include("partials/navbar") -%>
<%- include("partials/searchbar") -%>

<section id="Dashboard">
	<div class="container content">
		<div class="table-responsive-md">
			<%- include ("./partials/messages") -%>
			<table class="table table-striped table-hover">
				<% if (dashboardAdminData.length === 0) { %>
				<caption>Table is empty. Click on add new issue!</caption>
				<% } else { %>
				<caption>Click on the tickets for more details.</caption>
				<% } %>
				<thead class="thead-dark">
					<tr>
						<th scope="col">Tickets</th>
						<th scope="col">Status</th>
						<th scope="col">Project ID</th>
						<th scope="col">Priority</th>
						<th scope="col">Opened ON</th>
						<th scope="col">Closed ON</th>
					</tr>
				</thead>
				<tbody>
					<% dashboardAdminData.forEach(data => { %>
					<tr>
						<th scope="row">
							<a href="/dashboard/BG/<%= data.id %>" class="id-link">
								BG<%= data.id %>
							</a>
						</th>
						<td><%= data.status %></td>
						<td>
							<a href="/dashboard/projects/PR<%= data.project_id %>" class="id-link">
								PR<%= data.project_id %>
							</a>
						</td>
						<td><%= data.priority %></td>
						<td><%= date(data.createdAt) %></td>
						<td><%= date(data.closedOn) %></td>
					</tr>
					<% }) %>
				</tbody>
			</table>
		</div>
	</div>

</section>